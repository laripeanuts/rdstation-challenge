#!/usr/bin/env sh

# Carrega o ambiente do shell (√∫til para nvm, etc.)
export PATH="$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH"

# Verifica se h√° arquivos do frontend sendo commitados
staged_files=$(git diff --cached --name-only --diff-filter=ACM | grep -E '^frontend/' || true)

if [ -n "$staged_files" ]; then
  echo "üîç Executando lint-staged nos arquivos do frontend..."
  
  # Executa lint-staged que ir√° fazer lint apenas nos arquivos staged
  yarn lint-staged
  
  if [ $? -ne 0 ]; then
    echo ""
    echo "‚ùå Lint falhou! Por favor, corrija os erros antes de commitar."
    exit 1
  fi
  
  echo "‚úÖ Lint passou com sucesso!"
fi
